# 节点最多可以创建多少个Pod<a name="cce_01_0348"></a>

节点可以创建最大Pod数量由如下参数决定。

-   节点可分配容器IP数（alpha.cce/fixPoolMask）：在创建CCE集群时配置，仅网络模型为“VPC网络“需要配置。
-   节点最大实例数（maxPods）：在创建节点时配置，是kubelet的配置项。
-   CCE Turbo集群节点网卡数量：CCE Turbo集群ECS节点使用弹性辅助网卡，裸金属节点使用弹性网卡，节点可以创建最大Pod数量与节点可使用网卡数量相关。

节点上最多能创建多少个Pod，取决于这几个参数的最小值。

-   对于“容器隧道网络“的集群，仅取决于[节点最大实例数](#section16296174054019)。
-   对于“VPC网络“的集群，取决于[节点最大实例数](#section16296174054019)和[节点可分配容器IP数](#section10770192193714)的最小值，即  **min\(节点最大实例数, 节点可分配容器IP数\)**。
-   对于“云原生2.0网络“的集群（CCE Turbo集群），取决于[节点最大实例数](#section16296174054019)和[节点可使用网卡数量](#section491514414286)。

## 容器网络 vs 主机网络<a name="section12428143711548"></a>

创建Pod时，可以选择Pod使用容器网络或是宿主机网络。

-   容器网络：默认使用容器网络，Pod的网络由集群网络插件负责分配，**每个Pod分配一个IP地址，会占用容器网络的IP**。
-   主机网络：Pod直接使用宿主机的网络（Pod需要配置hostNetwork: true），会占用宿主机的端口，Pod的IP就是宿主机的IP，**不会占用容器网络的IP**。使用时需要考虑是否与宿主机上的端口冲突，因此一般情况下除非您知道需要某个特定应用占用宿主机上的特定端口时，不建议使用主机网络。

## 节点可分配容器IP数<a name="section10770192193714"></a>

在创建CCE集群时，如果网络模型选择“VPC网络“，会让您选择每个节点可供分配的容器IP数量，如下图所示。

该参数会影响节点上可以创建最大Pod的数量，因为每个Pod会占用一个IP（使用容器网络），如果可用IP数量不够的话，就无法创建Pod。

![](figures/zh-cn_image_0000001195057213.png)

节点默认会占用掉3个容器IP地址（网络地址、网关地址、广播地址），因此节点上** 可分配给容器使用的IP数量 = 您选择的容器IP数量 - 3**，例如上面图中可分配给容器使用的IP数量为 128-3=125。

## 节点最大实例数<a name="section16296174054019"></a>

在创建节点时，可以配置节点可以创建的最大实例数。该参数是kubelet的配置参数，决定kubelet最多可创建多少个Pod。

![](figures/zh-cn_image_0000001148989534.png)

## CCE Turbo集群节点网卡数量<a name="section491514414286"></a>

CCE Turbo集群节点网卡数量说明，请参见[云原生网络2.0](云原生网络2-0-69.md)。

