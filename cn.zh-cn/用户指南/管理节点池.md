# 管理节点池<a name="cce_10_0222"></a>

## 约束与限制<a name="section2858332152410"></a>

默认节点池DefaultPool不支持如下管理操作。

## 配置管理<a name="section34573421435"></a>

为方便对CCE集群中的kubernetes配置参数进行管理，CCE提供了配置管理功能，通过该功能您可以对核心组件进行深度配置，更多信息请参见[kubelet](https://kubernetes.io/zh/docs/reference/command-line-tools-reference/kubelet/)。

仅支持在**v1.15及以上版本**的集群中对节点池进行配置，V1.15以下版本不显示该功能。

1.  登录CCE控制台。
2.  进入集群，在左侧选择“节点管理“，在右侧选择“节点池“页签。
3.  单击节点池名称后的“更多 \> 配置管理“。
4.  在侧边栏滑出的“配置管理“窗口中，根据业务需求修改Kubernetes的参数值：

    **表 1**  配置管理参数

    <a name="table39227516315"></a>
    <table><thead align="left"><tr id="row59201451536"><th class="cellrowborder" valign="top" width="14.38%" id="mcps1.2.6.1.1"><p id="p891914515311"><a name="p891914515311"></a><a name="p891914515311"></a>组件</p>
    </th>
    <th class="cellrowborder" valign="top" width="25.3%" id="mcps1.2.6.1.2"><p id="p199191758311"><a name="p199191758311"></a><a name="p199191758311"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="30.15%" id="mcps1.2.6.1.3"><p id="p09208511315"><a name="p09208511315"></a><a name="p09208511315"></a>详情</p>
    </th>
    <th class="cellrowborder" valign="top" width="15.17%" id="mcps1.2.6.1.4"><p id="p69201514317"><a name="p69201514317"></a><a name="p69201514317"></a>默认</p>
    </th>
    <th class="cellrowborder" valign="top" width="15%" id="mcps1.2.6.1.5"><p id="p123651546173612"><a name="p123651546173612"></a><a name="p123651546173612"></a>修改限制</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row9920257311"><td class="cellrowborder" rowspan="5" valign="top" width="14.38%" headers="mcps1.2.6.1.1 "><p id="p5920125636"><a name="p5920125636"></a><a name="p5920125636"></a>docker</p>
    </td>
    <td class="cellrowborder" valign="top" width="25.3%" headers="mcps1.2.6.1.2 "><p id="p1892075739"><a name="p1892075739"></a><a name="p1892075739"></a>native-umask</p>
    </td>
    <td class="cellrowborder" valign="top" width="30.15%" headers="mcps1.2.6.1.3 "><p id="p992018513320"><a name="p992018513320"></a><a name="p992018513320"></a>`--exec-opt native.umask</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.17%" headers="mcps1.2.6.1.4 "><p id="p1992013519316"><a name="p1992013519316"></a><a name="p1992013519316"></a>normal</p>
    </td>
    <td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.6.1.5 "><p id="p13651469361"><a name="p13651469361"></a><a name="p13651469361"></a>不支持修改</p>
    </td>
    </tr>
    <tr id="row956912270015"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p3920457318"><a name="p3920457318"></a><a name="p3920457318"></a>docker-base-size</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p692015438"><a name="p692015438"></a><a name="p692015438"></a>`--storage-opts dm.basesize</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p1492045331"><a name="p1492045331"></a><a name="p1492045331"></a>0</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p15365154611361"><a name="p15365154611361"></a><a name="p15365154611361"></a>不支持修改</p>
    </td>
    </tr>
    <tr id="row20161957308"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p7163572009"><a name="p7163572009"></a><a name="p7163572009"></a>insecure-registry</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p1161957203"><a name="p1161957203"></a><a name="p1161957203"></a>不安全的镜像源地址</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p181615578012"><a name="p181615578012"></a><a name="p181615578012"></a>false</p>
    <p id="p10419135794119"><a name="p10419135794119"></a><a name="p10419135794119"></a></p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p11165572001"><a name="p11165572001"></a><a name="p11165572001"></a>不支持修改</p>
    </td>
    </tr>
    <tr id="row99202051336"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p1777819331709"><a name="p1777819331709"></a><a name="p1777819331709"></a>limitcore</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p777723311018"><a name="p777723311018"></a><a name="p777723311018"></a>核数限制，节点池中创建的节点总核数不能超过该值</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p157771331704"><a name="p157771331704"></a><a name="p157771331704"></a>5368709120</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p197477331804"><a name="p197477331804"></a><a name="p197477331804"></a>-</p>
    </td>
    </tr>
    <tr id="row29796302118"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p37987121802"><a name="p37987121802"></a><a name="p37987121802"></a>default-ulimit-nofile</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p11798101218015"><a name="p11798101218015"></a><a name="p11798101218015"></a>容器内句柄数限制</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p9798141216012"><a name="p9798141216012"></a><a name="p9798141216012"></a>{soft}:{hard}</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p1516161685618"><a name="p1516161685618"></a><a name="p1516161685618"></a>-</p>
    </td>
    </tr>
    <tr id="row179201258310"><td class="cellrowborder" rowspan="2" valign="top" width="14.38%" headers="mcps1.2.6.1.1 "><p id="p7920851036"><a name="p7920851036"></a><a name="p7920851036"></a>kube-proxy</p>
    </td>
    <td class="cellrowborder" valign="top" width="25.3%" headers="mcps1.2.6.1.2 "><p id="p149201555311"><a name="p149201555311"></a><a name="p149201555311"></a>conntrack-min</p>
    </td>
    <td class="cellrowborder" valign="top" width="30.15%" headers="mcps1.2.6.1.3 "><p id="p1920951312"><a name="p1920951312"></a><a name="p1920951312"></a>sysctl -w net.nf_conntrack_max</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.17%" headers="mcps1.2.6.1.4 "><p id="p139204513313"><a name="p139204513313"></a><a name="p139204513313"></a>131072</p>
    </td>
    <td class="cellrowborder" rowspan="2" valign="top" width="15%" headers="mcps1.2.6.1.5 "><p id="p1736544616369"><a name="p1736544616369"></a><a name="p1736544616369"></a>支持在节点池生命周期中修改</p>
    </td>
    </tr>
    <tr id="row8921258311"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p1292135033"><a name="p1292135033"></a><a name="p1292135033"></a>conntrack-tcp-timeout-close-wait</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p199211851134"><a name="p199211851134"></a><a name="p199211851134"></a>sysctl -w net.netfilter.nf_conntrack_tcp_timeout_close_wait</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p179211510311"><a name="p179211510311"></a><a name="p179211510311"></a>1h0m0s</p>
    </td>
    </tr>
    <tr id="row11921251238"><td class="cellrowborder" rowspan="12" valign="top" width="14.38%" headers="mcps1.2.6.1.1 "><p id="p14921351833"><a name="p14921351833"></a><a name="p14921351833"></a>kubelet</p>
    </td>
    <td class="cellrowborder" valign="top" width="25.3%" headers="mcps1.2.6.1.2 "><p id="p20921756312"><a name="p20921756312"></a><a name="p20921756312"></a>cpu-manager-policy</p>
    </td>
    <td class="cellrowborder" valign="top" width="30.15%" headers="mcps1.2.6.1.3 "><p id="p17921952039"><a name="p17921952039"></a><a name="p17921952039"></a>`--cpu-manager-policy</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.17%" headers="mcps1.2.6.1.4 "><p id="p992175733"><a name="p992175733"></a><a name="p992175733"></a>none</p>
    </td>
    <td class="cellrowborder" rowspan="8" valign="top" width="15%" headers="mcps1.2.6.1.5 "><p id="p3365646173618"><a name="p3365646173618"></a><a name="p3365646173618"></a>支持在节点池生命周期中修改</p>
    </td>
    </tr>
    <tr id="row192120517312"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p1292113519312"><a name="p1292113519312"></a><a name="p1292113519312"></a>kube-api-qps</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p1392155933"><a name="p1392155933"></a><a name="p1392155933"></a>与kube-apiserver通信的qps</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p192125435"><a name="p192125435"></a><a name="p192125435"></a>100</p>
    </td>
    </tr>
    <tr id="row189211251930"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p179211857313"><a name="p179211857313"></a><a name="p179211857313"></a>kube-api-burst</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p14921205536"><a name="p14921205536"></a><a name="p14921205536"></a>与kube-apiserver通信的burst</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p17921951232"><a name="p17921951232"></a><a name="p17921951232"></a>100</p>
    </td>
    </tr>
    <tr id="row1992115514319"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p199211558318"><a name="p199211558318"></a><a name="p199211558318"></a>max-pods</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p139211750310"><a name="p139211750310"></a><a name="p139211750310"></a>kubelet管理的pod上限</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p15336122815358"><a name="p15336122815358"></a><a name="p15336122815358"></a>20</p>
    </td>
    </tr>
    <tr id="row1423519271022"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p1424218271326"><a name="p1424218271326"></a><a name="p1424218271326"></a>pod-pids-limit</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p72425271023"><a name="p72425271023"></a><a name="p72425271023"></a>k8s 限制进程数</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p2024282719213"><a name="p2024282719213"></a><a name="p2024282719213"></a>-1</p>
    </td>
    </tr>
    <tr id="row139221751031"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p39211451232"><a name="p39211451232"></a><a name="p39211451232"></a>with-local-dns</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p11922155317"><a name="p11922155317"></a><a name="p11922155317"></a>是否使用本地IP作为该节点的ClusterDNS</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p159222510310"><a name="p159222510310"></a><a name="p159222510310"></a>false</p>
    </td>
    </tr>
    <tr id="row1016115483359"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p2036473943312"><a name="p2036473943312"></a><a name="p2036473943312"></a>event-qps</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p183642398336"><a name="p183642398336"></a><a name="p183642398336"></a>事件创建QPS限制</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p1336453943317"><a name="p1336453943317"></a><a name="p1336453943317"></a>5</p>
    </td>
    </tr>
    <tr id="row119221051531"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p392225737"><a name="p392225737"></a><a name="p392225737"></a>allowed-unsafe-sysctls</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p292218515312"><a name="p292218515312"></a><a name="p292218515312"></a>允许使用的不安全系统配置。</p>
    <p id="p1255654524218"><a name="p1255654524218"></a><a name="p1255654524218"></a>CCE从<strong id="b1254312564568"><a name="b1254312564568"></a><a name="b1254312564568"></a>1.17.17</strong>集群版本开始，kube-apiserver开启了pod安全策略，需要在pod安全策略的allowedUnsafeSysctls中增加相应的配置才能生效（1.17.17以下版本的集群可不配置）。详情请参见<a href="PodSecurityPolicy配置.md#section155111941177">Pod安全策略开放非安全系统配置示例</a>。</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p79221551538"><a name="p79221551538"></a><a name="p79221551538"></a>[]</p>
    </td>
    </tr>
    <tr id="row362443718199"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p1362593715194"><a name="p1362593715194"></a><a name="p1362593715194"></a>kube-reserved-mem</p>
    <p id="p17130736112118"><a name="p17130736112118"></a><a name="p17130736112118"></a>system-reserved-mem</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p6625153710197"><a name="p6625153710197"></a><a name="p6625153710197"></a>节点内存预留。</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p1625193751919"><a name="p1625193751919"></a><a name="p1625193751919"></a>随节点规格变动，具体请参见<a href="节点预留资源计算公式.md">节点预留资源计算公式</a></p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p5625123701913"><a name="p5625123701913"></a><a name="p5625123701913"></a>kube-reserved-mem，system-reserved-mem之和小于内存的一半</p>
    </td>
    </tr>
    <tr id="row0769163972815"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p187704396286"><a name="p187704396286"></a><a name="p187704396286"></a>topology-manager-policy</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p194194963117"><a name="p194194963117"></a><a name="p194194963117"></a>设置拓扑管理策略。</p>
    <p id="p180294523117"><a name="p180294523117"></a><a name="p180294523117"></a>合法值包括：</p>
    <a name="ul9802545113118"></a><a name="ul9802545113118"></a><ul id="ul9802545113118"><li>restricted：kubelet 仅接受在所请求资源上实现最佳 NUMA对齐的Pod。</li><li>best-effort：kubelet会优先选择在 CPU 和设备资源上实现NUMA对齐的Pod。</li><li>none（默认）：不启用拓扑管理策略。</li><li>single-numa-node：kubelet仅允许在 CPU和设备资源上对齐到同一NUMA节点的Pod。</li></ul>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p477010397282"><a name="p477010397282"></a><a name="p477010397282"></a>none</p>
    </td>
    <td class="cellrowborder" rowspan="2" valign="top" headers="mcps1.2.6.1.4 "><p id="p18868132111335"><a name="p18868132111335"></a><a name="p18868132111335"></a>支持在节点池生命周期中修改</p>
    <div class="notice" id="note89763063412"><a name="note89763063412"></a><a name="note89763063412"></a><span class="noticetitle"> 须知： </span><div class="noticebody"><p id="p521818615343"><a name="p521818615343"></a><a name="p521818615343"></a>修改topology-manager-policy和topology-manager-scope会重启kubelet，并且以更改后的策略重新计算容器实例的资源分配，这有可能导致已经运行的容器实例重启甚至无法进行资源分配。</p>
    <p id="p169763011340"><a name="p169763011340"></a><a name="p169763011340"></a></p>
    </div></div>
    </td>
    </tr>
    <tr id="row363114444281"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p4631124411282"><a name="p4631124411282"></a><a name="p4631124411282"></a>topology-manager-scope</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p183841836183219"><a name="p183841836183219"></a><a name="p183841836183219"></a>设置拓扑管理策略的资源对齐粒度。合法值包括：</p>
    <a name="ul3384836153218"></a><a name="ul3384836153218"></a><ul id="ul3384836153218"><li>container （默认)：对齐粒度为容器级</li><li>pod：对齐粒度为pod级</li></ul>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p136311744192811"><a name="p136311744192811"></a><a name="p136311744192811"></a>container</p>
    </td>
    </tr>
    <tr id="row47012165164"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p137161681620"><a name="p137161681620"></a><a name="p137161681620"></a>over-subscription-resource</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p19712016121614"><a name="p19712016121614"></a><a name="p19712016121614"></a>节点超卖特性。</p>
    <p id="p2083075010179"><a name="p2083075010179"></a><a name="p2083075010179"></a>仅<strong id="b1539243381717"><a name="b1539243381717"></a><a name="b1539243381717"></a>弹性云服务器-物理机</strong>类型的节点池可见，设置为true表示开启节点超卖特性，节点超卖的特性请参见<a href="在线离线作业混合部署.md">在线离线作业混合部署</a>。</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p871151610166"><a name="p871151610166"></a><a name="p871151610166"></a>-</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p1071816111618"><a name="p1071816111618"></a><a name="p1071816111618"></a>-</p>
    </td>
    </tr>
    <tr id="row141189227588"><td class="cellrowborder" rowspan="2" valign="top" width="14.38%" headers="mcps1.2.6.1.1 "><p id="p6239550173717"><a name="p6239550173717"></a><a name="p6239550173717"></a>eni</p>
    </td>
    <td class="cellrowborder" valign="top" width="25.3%" headers="mcps1.2.6.1.2 "><p id="p122391450133711"><a name="p122391450133711"></a><a name="p122391450133711"></a>nic-multiqueue</p>
    </td>
    <td class="cellrowborder" valign="top" width="30.15%" headers="mcps1.2.6.1.3 "><p id="p7239105023715"><a name="p7239105023715"></a><a name="p7239105023715"></a>网卡预热队列数</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.17%" headers="mcps1.2.6.1.4 "><p id="p42391150193714"><a name="p42391150193714"></a><a name="p42391150193714"></a>4</p>
    </td>
    <td class="cellrowborder" rowspan="2" valign="top" width="15%" headers="mcps1.2.6.1.5 "><p id="p16118162219584"><a name="p16118162219584"></a><a name="p16118162219584"></a>只对共池裸机提供网卡预热</p>
    </td>
    </tr>
    <tr id="row1543961912583"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p1325313217553"><a name="p1325313217553"></a><a name="p1325313217553"></a>nic-threshold</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p92531432205517"><a name="p92531432205517"></a><a name="p92531432205517"></a>网卡预热高低水位</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p7253203215520"><a name="p7253203215520"></a><a name="p7253203215520"></a>默认：0.3:0.6</p>
    </td>
    </tr>
    <tr id="row93172041151919"><td class="cellrowborder" valign="top" width="14.38%" headers="mcps1.2.6.1.1 "><p id="p5317141151918"><a name="p5317141151918"></a><a name="p5317141151918"></a>yangste-agent</p>
    </td>
    <td class="cellrowborder" valign="top" width="25.3%" headers="mcps1.2.6.1.2 "><p id="p03172418195"><a name="p03172418195"></a><a name="p03172418195"></a>security_groups_for_nodepool</p>
    </td>
    <td class="cellrowborder" valign="top" width="30.15%" headers="mcps1.2.6.1.3 "><p id="p319671315610"><a name="p319671315610"></a><a name="p319671315610"></a>节点池上Pod默认使用的安全组，不配置则使用集群容器网络的默认安全组；优先级低于<a href="SecurityGroup.md">SecurityGroup</a>资源对象配置的安全组。</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.17%" headers="mcps1.2.6.1.4 "><p id="p531764110191"><a name="p531764110191"></a><a name="p531764110191"></a>-</p>
    </td>
    <td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.6.1.5 "><p id="p15317144141913"><a name="p15317144141913"></a><a name="p15317144141913"></a>仅CCE Turbo集群可见</p>
    </td>
    </tr>
    <tr id="row5263181772217"><td class="cellrowborder" rowspan="3" valign="top" width="14.38%" headers="mcps1.2.6.1.1 "><p id="p1447345122319"><a name="p1447345122319"></a><a name="p1447345122319"></a>containerd</p>
    <p id="p9910380262"><a name="p9910380262"></a><a name="p9910380262"></a>（仅使用containerd的节点池可见）</p>
    </td>
    <td class="cellrowborder" valign="top" width="25.3%" headers="mcps1.2.6.1.2 "><p id="p9264917112215"><a name="p9264917112215"></a><a name="p9264917112215"></a>devmapper-base-size</p>
    </td>
    <td class="cellrowborder" valign="top" width="30.15%" headers="mcps1.2.6.1.3 "><p id="p1126481742220"><a name="p1126481742220"></a><a name="p1126481742220"></a>单容器可用数据空间</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.17%" headers="mcps1.2.6.1.4 "><p id="p726441742217"><a name="p726441742217"></a><a name="p726441742217"></a>10G</p>
    </td>
    <td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.6.1.5 "><p id="p32641517112215"><a name="p32641517112215"></a><a name="p32641517112215"></a>不支持修改</p>
    </td>
    </tr>
    <tr id="row15165171912316"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p51655196239"><a name="p51655196239"></a><a name="p51655196239"></a>limitcore</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p1616551917233"><a name="p1616551917233"></a><a name="p1616551917233"></a>核数限制</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p11165151912232"><a name="p11165151912232"></a><a name="p11165151912232"></a>5368709120</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p1216531942315"><a name="p1216531942315"></a><a name="p1216531942315"></a>-</p>
    </td>
    </tr>
    <tr id="row4833152510239"><td class="cellrowborder" valign="top" headers="mcps1.2.6.1.1 "><p id="p11833102515234"><a name="p11833102515234"></a><a name="p11833102515234"></a>default-ulimit-nofile</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.2 "><p id="p983311257234"><a name="p983311257234"></a><a name="p983311257234"></a>容器内句柄数限制</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.3 "><p id="p183392572315"><a name="p183392572315"></a><a name="p183392572315"></a>1048576</p>
    </td>
    <td class="cellrowborder" valign="top" headers="mcps1.2.6.1.4 "><p id="p11833182502317"><a name="p11833182502317"></a><a name="p11833182502317"></a>-</p>
    </td>
    </tr>
    </tbody>
    </table>

5.  单击“确定“，完成配置操作。

## 编辑节点池<a name="section359343125016"></a>

1.  登录CCE控制台。
2.  进入集群，在左侧选择“节点管理“，在右侧选择“节点池“页签。
3.  单击节点池名称后的“编辑“，在弹出的“编辑节点池“中，配置以下参数：

    **表 2**  配置节点池参数

    <a name="table16321825732"></a>
    <table><thead align="left"><tr id="row173212251235"><th class="cellrowborder" valign="top" width="28.000000000000004%" id="mcps1.2.3.1.1"><p id="p43211725338"><a name="p43211725338"></a><a name="p43211725338"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="72%" id="mcps1.2.3.1.2"><p id="p0322102516320"><a name="p0322102516320"></a><a name="p0322102516320"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row163229255313"><td class="cellrowborder" valign="top" width="28.000000000000004%" headers="mcps1.2.3.1.1 "><p id="p1232219251339"><a name="p1232219251339"></a><a name="p1232219251339"></a>节点池名称</p>
    </td>
    <td class="cellrowborder" valign="top" width="72%" headers="mcps1.2.3.1.2 "><p id="p129475498531"><a name="p129475498531"></a><a name="p129475498531"></a>自定义节点池名称。</p>
    </td>
    </tr>
    <tr id="row6334727910"><td class="cellrowborder" valign="top" width="28.000000000000004%" headers="mcps1.2.3.1.1 "><p id="p233592498"><a name="p233592498"></a><a name="p233592498"></a>节点个数</p>
    </td>
    <td class="cellrowborder" valign="top" width="72%" headers="mcps1.2.3.1.2 "><p id="p149431649155313"><a name="p149431649155313"></a><a name="p149431649155313"></a>请根据业务需求调整节点个数。</p>
    </td>
    </tr>
    <tr id="row111551253912"><td class="cellrowborder" valign="top" width="28.000000000000004%" headers="mcps1.2.3.1.1 "><p id="p51551451293"><a name="p51551451293"></a><a name="p51551451293"></a>弹性扩缩容</p>
    </td>
    <td class="cellrowborder" valign="top" width="72%" headers="mcps1.2.3.1.2 "><p id="p20736112217461"><a name="p20736112217461"></a><a name="p20736112217461"></a>默认不开启。</p>
    <p id="p9680175204915"><a name="p9680175204915"></a><a name="p9680175204915"></a>单击<a name="image16680652104914"></a><a name="image16680652104914"></a><span><img id="image16680652104914" src="figures/zh-cn_image_0000001199021280.png"></span>开启后，节点池将根据业务需求自动创建或删除节点池内的节点，参数设置如下：</p>
    <a name="ul15733045165119"></a><a name="ul15733045165119"></a><ul id="ul15733045165119"><li>节点数上限和节点数下限：您可设置节点数的上限和下限，保证节点数在合理的范围内伸缩。</li><li>优先级：该数值表示节点池之间进行弹性扩缩容的优先级，数值越大优先级越高，如设置为4的节点池比设置为1的节点池优先启动弹性伸缩。若多个节点池的值设置相同，如都设置为2，表示这几个节点池之间不分优先级，系统将按最小资源浪费原则进行伸缩。</li><li>弹性缩容冷却时间：请设置时间，单位为分钟。弹性缩容冷却时间是指当前节点池扩容出的节点多长时间不能被缩容。</li></ul>
    <p id="p15393133683015"><a name="p15393133683015"></a><a name="p15393133683015"></a>为保证功能的正常使用，节点池开启弹性扩缩容功能后，请务必安装<a href="autoscaler.md">AutoScaler插件</a>。</p>
    </td>
    </tr>
    <tr id="row1535723154615"><td class="cellrowborder" valign="top" width="28.000000000000004%" headers="mcps1.2.3.1.1 "><p id="p1253915513402"><a name="p1253915513402"></a><a name="p1253915513402"></a>K8S标签</p>
    </td>
    <td class="cellrowborder" valign="top" width="72%" headers="mcps1.2.3.1.2 "><p id="p11258124419136"><a name="p11258124419136"></a><a name="p11258124419136"></a>单击<span class="uicontrol" id="uicontrol18258644131312"><a name="uicontrol18258644131312"></a><a name="uicontrol18258644131312"></a>“添加标签”</span>可以设置附加到Kubernetes 对象（比如Pods）上的键值对，最多可以添加10条标签</p>
    <p id="p1442572821211"><a name="p1442572821211"></a><a name="p1442572821211"></a>使用该标签可区分不同节点，可结合工作负载的亲和能力实现容器Pod调度到指定节点的功能。详细请参见<a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/" target="_blank" rel="noopener noreferrer">Labels and Selectors</a>。</p>
    </td>
    </tr>
    <tr id="row133224252315"><td class="cellrowborder" valign="top" width="28.000000000000004%" headers="mcps1.2.3.1.1 "><p id="p25391859406"><a name="p25391859406"></a><a name="p25391859406"></a>资源标签</p>
    </td>
    <td class="cellrowborder" valign="top" width="72%" headers="mcps1.2.3.1.2 "><p id="p14909254174019"><a name="p14909254174019"></a><a name="p14909254174019"></a>通过为资源添加标签，可以对资源进行自定义标记，实现资源的分类。</p>
    <p id="p10327184710426"><a name="p10327184710426"></a><a name="p10327184710426"></a>您可以在TMS中创建<span class="uicontrol" id="uicontrol922854293212"><a name="uicontrol922854293212"></a><a name="uicontrol922854293212"></a>“预定义标签”</span>，预定义标签对所有支持标签功能的服务资源可见，通过使用预定义标签可以提升标签创建和迁移效率。具体请参见<a href="https://support.huaweicloud.com/usermanual-tms/zh-cn_topic_0144368884.html" target="_blank" rel="noopener noreferrer">创建预定义标签</a>。</p>
    <p id="p1738110524401"><a name="p1738110524401"></a><a name="p1738110524401"></a>CCE服务会自动帮您创建CCE-Dynamic-Provisioning-Node=节点id的标签。</p>
    </td>
    </tr>
    <tr id="row85016262545"><td class="cellrowborder" valign="top" width="28.000000000000004%" headers="mcps1.2.3.1.1 "><p id="p55391457404"><a name="p55391457404"></a><a name="p55391457404"></a>污点(Taints)</p>
    </td>
    <td class="cellrowborder" valign="top" width="72%" headers="mcps1.2.3.1.2 "><div class="p" id="p2875141354415"><a name="p2875141354415"></a><a name="p2875141354415"></a>默认为空。支持给节点加Taints来设置反亲和性，每个节点最多配置10条Taints，每条Taints包含以下3个参数：<a name="ul17274222121015"></a><a name="ul17274222121015"></a><ul id="ul17274222121015"><li>Key：必须以字母或数字开头，可以包含字母、数字、连字符、下划线和点，最长63个字符；另外可以使用DNS子域作为前缀。</li><li>Value：必须以字符或数字开头，可以包含字母、数字、连字符、下划线和点，最长63个字符。</li><li>Effect：只可选NoSchedule，PreferNoSchedule或NoExecute。</li></ul>
    </div>
    <p id="p1817835834614"><a name="p1817835834614"></a><a name="p1817835834614"></a>Taints的使用请参见<a href="管理节点污点（taint）.md">管理节点污点（taint）</a>。</p>
    </td>
    </tr>
    </tbody>
    </table>

4.  配置完成后，单击“确定“。

    在节点池列表中可查看到节点池状态为“伸缩中“，待状态变为“完成“，节点池参数编辑成功，修改的配置后将同步到节点池下的已有节点。


## 删除节点池<a name="section135941731115017"></a>

删除节点池，会先删除节点池中的节点，节点删除后，原有节点上的工作负载实例会自动迁移至其他节点池的可用节点。如果工作负载实例具有特定的节点选择器，且如果集群中的其他节点均不符合标准，则工作负载实例可能仍处于无法安排的状态。

1.  登录CCE控制台。
2.  进入集群，在左侧选择“节点管理“，在右侧选择“节点池“页签。
3.  单击节点池名称后的“更多 \> 删除“。
4.  在弹出的“删除节点池“窗口中，请仔细阅读界面提示。
5.  确定要对节点池进行删除操作后，请在弹窗中单击“是“，即可完成节点池的删除。

## 拷贝节点池<a name="section550619571556"></a>

通过CCE控制台可以方便的拷贝现有节点池的配置，从而创建新的节点池。

1.  登录CCE控制台。
2.  进入集群，在左侧选择“节点管理“，在右侧选择“节点池“页签。
3.  单击节点池名称后的“更多 \> 拷贝“。
4.  在弹出的“创建节点池“窗口中，可以看到拷贝的节点池配置，您可以根据需要进行修改，确定配置后单击“下一步：规格确认“。
5.  在“规格确认“步骤中再次确认规格并单击“提交“，即可完成节点池的拷贝并创建新的节点池。

